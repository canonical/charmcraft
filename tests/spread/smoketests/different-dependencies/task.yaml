summary: pack a charm with different dependencies specified

environment:
  CHARM/bases: bases-charm
  CHARM/platforms: platforms-charm

include:
  - tests/

restore: |
  pushd "${CHARM}"
  charmcraft clean
  popd

  rm -rf "${CHARM}"

execute: |
  cd "${CHARM}"
  charmcraft pack --verbose
  test -f charm*.charm
  unzip -l charm*.charm | MATCH "venv/pytest/__init__.py"
  unzip -l charm*.charm | MATCH "venv/bumpversion/__init__.py"
  unzip -l charm*.charm | MATCH "venv/fades/__init__.py"
