# Copyright 2024 Canonical
# See LICENSE file for licensing details.

[tox]
no_package = True
skip_missing_interpreters = True
env_list = format, lint, static
min_version = 4.0.0

[vars]
src_path = {tox_root}/test-init/src
tests_path = {tox_root}/tests

[testenv]
set_env =
    PYTHONPATH = {tox_root}/test-init/lib:{[vars]src_path}
    PYTHONBREAKPOINT=pdb.set_trace
    PY_COLORS=1
pass_env =
    PYTHONPATH
    CHARM_BUILD_DIR

[testenv:unit]
description = Run unit tests
deps =
    pytest
    ops-scenario
    -r {tox_root}/test-init/requirements.txt
commands =
    pytest \
        --tb native \
        -v \
        -s \
	--confcutdir={tox_root} \
        {posargs} \
        {[vars]tests_path}/unit
